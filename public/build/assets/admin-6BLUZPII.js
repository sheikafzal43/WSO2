import{a as N,r,j as e,H as w,b as v}from"./app-Bwj0rBx-.js";/* empty css            */function A(){const{auth:n}=N().props,[i,x]=r.useState([]),[a,d]=r.useState({total:0,totalAmount:0,avgAmount:0,todayCount:0}),[m,h]=r.useState(!0);r.useEffect(()=>{c()},[]);const c=async()=>{try{const s=await(await fetch("/api/donations")).json();s.success&&(x(s.data),p(s.data))}catch(t){console.error("Error fetching donations:",t)}finally{h(!1)}},p=t=>{const s=t.length,o=t.reduce((l,b)=>l+parseFloat(b.amount),0),j=s>0?o/s:0,f=new Date().toISOString().split("T")[0],y=t.filter(l=>l.created_at.startsWith(f)).length;d({total:s,totalAmount:o,avgAmount:j,todayCount:y})},g=(t,s)=>new Intl.NumberFormat("en-US",{style:"currency",currency:s||"USD"}).format(parseFloat(t)),u=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(e.Fragment,{children:[e.jsx(w,{title:"Admin Dashboard"}),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl font-bold",children:"ðŸ“Š"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Dashboard"}),n?.user&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Welcome, ",n.user.name]})]})]}),e.jsxs("nav",{className:"flex items-center gap-4",children:[e.jsx("a",{href:"/donate",className:"text-gray-600 hover:text-blue-600 font-medium",children:"Donate"}),e.jsx("a",{href:"/",className:"text-gray-600 hover:text-blue-600 font-medium",children:"Home"}),e.jsx("button",{onClick:()=>v.post("/admin/logout"),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium transition",children:"Logout"})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold opacity-90",children:"Total Donations"}),e.jsx("span",{className:"text-2xl",children:"ðŸ’°"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",a.totalAmount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsxs("p",{className:"text-sm opacity-75 mt-1",children:[a.total," transactions"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold opacity-90",children:"Total Donors"}),e.jsx("span",{className:"text-2xl",children:"ðŸ‘¥"})]}),e.jsx("p",{className:"text-3xl font-bold",children:a.total}),e.jsx("p",{className:"text-sm opacity-75 mt-1",children:"Generous supporters"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold opacity-90",children:"Average Donation"}),e.jsx("span",{className:"text-2xl",children:"ðŸ“ˆ"})]}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",a.avgAmount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]}),e.jsx("p",{className:"text-sm opacity-75 mt-1",children:"Per transaction"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl shadow-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-sm font-semibold opacity-90",children:"Today's Donations"}),e.jsx("span",{className:"text-2xl",children:"âš¡"})]}),e.jsx("p",{className:"text-3xl font-bold",children:a.todayCount}),e.jsx("p",{className:"text-sm opacity-75 mt-1",children:"Last 24 hours"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Donations"}),e.jsxs("button",{onClick:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium text-sm flex items-center gap-2",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})}),m?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):i.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸ“­"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No donations yet"}),e.jsx("p",{className:"text-gray-500",children:"Donations will appear here once they are received."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Donor"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Message"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map((t,s)=>e.jsxs("tr",{className:s%2===0?"bg-white hover:bg-gray-50":"bg-gray-50 hover:bg-gray-100",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full bg-blue-100 text-blue-800 text-sm font-semibold",children:t.id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"font-medium text-gray-900",children:t.donor_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-600",children:t.donor_email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-green-100 text-green-800",children:g(t.amount,t.currency)})}),e.jsx("td",{className:"px-6 py-4 max-w-xs",children:e.jsx("div",{className:"text-sm text-gray-600 truncate",title:t.message,children:t.message||"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u(t.created_at)})]},t.id))})]})})]}),e.jsx("div",{className:"mt-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”’"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:"Powered by WSO2 API Manager"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"This dashboard fetches data through WSO2 API Gateway with OAuth2 authentication, rate limiting, and full analytics tracking."})]})]})})]}),e.jsx("footer",{className:"bg-white border-t border-gray-200 py-6 mt-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500 text-sm",children:"Â© 2025 Donation Platform. Interview Demo Project - WSO2 API Manager Integration"})})]})]})}export{A as default};
